<div class="ContentSideSections Implementation">
    <p-panel header="Environment Details">
        <div class="ui-grid ui-grid-responsive ui-fluid ui-grid-pad" *ngIf="environment" ngForm #environmentForm="ngForm">
             <div class="ui-grid-row">
                <div class="ui-grid-col-2"><label for="name">Name  *</label></div>
                <div class="ui-grid-col-6">
                    <input pInputText id="name" [(ngModel)]="environment.name"  required placeholder="Required"  name="name" #name="ngModel"/>
                </div>
                <div class="ui-grid-col-4">
                    <div class="ui-message ui-messages-error ui-corner-all" *ngIf="!name.valid && name.dirty && name.errors.required">
                        <i class="fa fa-close"></i>
                        Name is required
                    </div>
                </div>
            </div>
             <div class="ui-grid-row">
                <div class="ui-grid-col-2"><label for="release">Release</label></div>
                <div class="ui-grid-col-4">
                    <release-auto-complete [(ngModel)]="environment.release" id="release" name="release" [disabled]="sub"></release-auto-complete>
                </div>
                <div class="ui-grid-col-1" *ngIf="!sub">
                    <button pButton id="gotoRelease" type="button" (click)="gotoRelease()" *ngIf="environment.release" icon="fa-pencil" label="Edit"></button>
                </div>
                <div class="ui-grid-col-1" *ngIf="!sub">
                    <button pButton id="clearRelease" type="button" (click)="clearRelease()" *ngIf="environment.release" icon="fa-chain-broken" label="Clear"></button>
                </div>
            </div>
             <div class="ui-g">
                <div class="ui-g-2" *ngIf="sub">
                    <button pButton type="button" (click)="onCancel()" icon="fa-ban" label="Cancel"></button>
                </div>
                <div class="ui-g-2">
                    <button pButton type="button" (click)="onSave()" icon="fa-floppy-o" label="Save" [disabled]="!environmentForm.form.valid"></button>
                </div>
                    <div class="ui-g-2">
                    <button pButton type="button" (click)="onDownload()" icon="fa-floppy-o" label="Download HieraValues"></button>
                </div>

            </div>
             <div class="ui-grid-row">
                <div class="ui-grid-col-5">
                    <p-dataTable [value]="environment.servers" [rows]="10" [paginator]="true" [globalFilter]="gb" selectionMode="multiple" [(selection)]="serversToRemove">
                        <header>List of Servers</header>
                        <p-column field="name" header="Server Name (startsWith)" [filter]="true" sortable="true"></p-column>
                        <p-column field="serverType.name" header="Server Type (contains)" [filter]="true" filterMatchMode="contains"sortable="true"></p-column>
                    </p-dataTable>
                    <button pButton type="button" (click)="onRemoveServers()" label="Remove Server(s)"></button>
                </div>
                <div class="ui-grid-col-5">
                    <p-dataTable [value]="currentPage.content"
                                [lazy]="true"
                                [rows]="10"
                                [paginator]="currentPage.totalElements > 10"
                                [totalRecords]="currentPage.totalElements"
                                (onLazyLoad)="loadPage($event)"
                                selectionMode="multiple"
                                [(selection)]="serversToAdd"
                                [rowsPerPageOptions]="[5,10,20,50,100]"
                                [responsive]="true">
                        <header>Available Servers</header>
                        <p-column field="name" header="Server Name" sortable="true" [filter]="true" filterMatchMode="contains"></p-column>
                        <p-column field="serverType.name" header="Server Type" sortable="true" [filter]="true" filterMatchMode="contains"></p-column>
                    </p-dataTable>
                    <button pButton type="button" (click)="onAddServers()" label="Add Server(s)"></button>
                </div>
                <!--                
                <div class="ui-grid-col-5">
                    <p-dataTable [value]="serversNotInEnv" [rows]="10" [paginator]="true" selectionMode="multiple" [(selection)]="serversToAdd">
                        <header>List of Available Servers</header>
                        <p-column field="name" header="Server Name (startsWith)" [filter]="true" sortable="true"></p-column>
                        <p-column field="serverType.name" header="Server Type (contains)" sortable="true" [filter]="true" filterMatchMode="contains"></p-column>
                    </p-dataTable>
                </div>
                -->            
            </div>
        </div>
    </p-panel>

    <div style="margin-top:8px">
        <p-fieldset legend="Hiera Data" toggleable="true" collapsed="true">
                <p-dataTable [value]="hieraValuesList">
                    <p-column field="address" header="Hiera Address"></p-column>
                    <p-column field="value" header="Hiera Value"></p-column>
                </p-dataTable>
        </p-fieldset>
    </div>
</div>
